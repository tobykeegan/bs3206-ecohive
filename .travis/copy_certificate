
#!/bin/bash

# Define the source and destination file paths
dev_cert="./.travis/dev_cert.pem"
prod_cert="./.travis/production_cert.pem"
destination="./cert.pem"

echo "TRAVIS_BRANCH=$TRAVIS_BRANCH"
echo "TRAVIS_PULL_REQUEST=$TRAVIS_PULL_REQUEST"


# Check if the TRAVIS_BRANCH variable is not set
if [ -z "$TRAVIS_BRANCH" ]; then
  echo "Error: TRAVIS_BRANCH variable is not set."
  exit 1
fi

# Check if TRAVIS_BRANCH is not main
if [ "$TRAVIS_BRANCH" == "main" ] || [ "$TRAVIS_PULL_REQUEST" ]; then
  # Copy prod_cert.pem to cert.pem
  cp "$prod_cert" "$destination"
  echo "Copied $prod_cert to $destination"
else
 # Copy dev_cert.pem to cert.pem
  cp "$dev_cert" "$destination"
  echo "Copied $dev_cert to $destination"
fi